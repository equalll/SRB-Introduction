### 为什么SRB的控制周期短是主要优点？
SRB通信速度可以控制在5~0.5ms内，具体取决于连接传感器的数量和种类，每个传感器平均花费0.1ms即可完成数据通信。</br>
比如一条总线每1ms遍历通信一次，就是说机器人大脑（机器人大脑指的是Arduino或者 PC上运行的ROS程序，是机器人上的控制核心）可以在最多1mm内收到一个信息并产生响应。参考其他同类设计，他们的响应时间普遍在20ms左右，例如舵机的控制使用20MsPWM信号。I2C和串口的通信波特率在100kbps左右，是SRB的 1/20 倍。</br>
平均1ms的响应速度带来了显而易见的好处，机器人传感器采集到危险信号时（例如即将撞上物体），该信号会被传输到机器人大脑，然后达到下达命令执行规避动作。传输时间越短，机器人就能越早的执行动作，也就可以更好的躲避危险。</br>
更短的响应速度让机器人可以执行更高精度的操作，例如倒立摆，无人飞行器等设计中，响应速度过低系统无法稳定。</br>
更短的控制周期将采集到更多更细密的数据，我们希望这些数据可以用于机器学习。这一点将在下面展开介绍。</br>

### 为什么SRB的实时控制周期不是一个固定数值？
这要从SRB通信原理说起。首先要说明的是进行通信时的硬件结构，我们以两种典型的结构来进行说明：
* 1.使用USB转SRB的情况: **台式电脑**--USB-->**USB转SRB模块**--SRB-->**节点**
* 2.使用MCU的情况**Arduino**--SRB-->**节点**

我们先从第二种情况说起:
假设SRB主机发送8bytes数据，加上地址，总线控制字和校验，需要11bytes；</br>
从机立即回复8假设SRB主机发送8bytes数据，包含总线控制字和校验需要10bytes；</br>
每个byte需要实际11bits进行发送包括（地址/数据位  开始位  停止位）。</br>
```21B × 11b/B = 231b ```</br>
数据发送时间最短为</br>
```231b / 2Mb/s = 115.5us```</br>
实际上因为程序需要反应时间，访问时间比计算值稍长约0.5~5us。收发的数据量也会影响访问的时间消耗。考虑只有4个节点的情况，我们说**访问的耗时大约为0.5ms**。</br>
但节点的数量和每个节点交互的数据量增加后，访问的耗时也会增加，甚至每个节点需要在一个控制周期进行多次访问。因此访问的时间消耗没有最大值，**一般场景下访问时间不会超过5ms**。</br>
每个实时控制周期包括对所有节点进行一次访问，和进行一次运算，运算的时间消耗由程序而定。我们对其进行简单的估计，认为实时控制周期为10ms到1ms，既**实时控制频率为1kHz到100Hz**。</br>
根据以上计算，在包含台式电脑的情况下，控制周期中增加了USB通信，USB通信的状态跟USB驱动，和电脑硬件有很大的关系，因此也不能一概而论，但台式电脑的运算速度比MCU快非常多，在这种情况下，我们也给出**实时控制频率为1kHz到100Hz**的结论。Win10下的实验显示，这样的估计是基本准确的，但是电脑同时运行其他程序，或者USB使用多个HUB，并进行其他通信时，**可能偶然发生同步周期加长的情况**，


### SRB扩展设备有多方便？
使用软件给一个设备配置地址，然后接入总线（连接4条线），这时候就可以控制这个设备了。对于Arduino，软件上的改动只要6行（最多8行），就能定义一个新的设备：</br>
```c++
	//---------------- SRB 节点的初始化 ---------------------------------
	SrbTinyNode node_motor; //定义一个节点
	Du_Motor::sDataRs motor_data; //定义一个双电机模块的数据空间
	void nodeInit(){
	    //节点初始化设置
	    node_motor.address = 4;//设置节点地址
	    node_motor.datas = (uint8*)(&motor_data);//设置节点数据空间
	    node_motor.mapping[0] = (sStaticMapping*)(Du_Motor::mapping0);//设置节点访问映射表
	    node_motor.mapping[1] = (sStaticMapping*)(Du_Motor::mapping1);//设置节点访问映射表
	    //初始化完毕
	}
```
对设备访问也很简单</br>
```c++
	//ma表示 motorA,mb表示motorB
	motor_data.ma.u16 = joy2Motor((y-x));
	//前面的负号是因为两个车轮的机械结构对称,车前运行时,电机一个正转一个反转
	motor_data.mb.u16 = joy2Motor(-(y+x));
	node_motor.access(1);//将刚刚写好的数据发往电机.
```
相比而言，添加非SRB设备需要考虑编写驱动程序，还要考虑多个设备对Arduino接口定时器等资源的占用，会给工程师带来大量的工作。</br>

### 对于使用SRB的系统，如何处理复杂的音视频数据？
推荐参考动物的神经结构：</br>
大脑直接连接视觉神经，采集视觉信号。（事实上，大脑中有专门的区域处理视觉信号，位置在枕叶，就是睡觉时候头部和枕头接触的部分，而机器人最好有专门的视觉处理器，处理此信号，再与大脑通信）</br>
大脑连接脊神经，脊神经连接肢体神经。</br>
类似的，音频，视频等信息量大，但传感器数量少的数据直接连接到机器人大脑，信息量低，但传感器数量多的数据通过SRB连接机器人大脑。</br>
特别说明的是，激光雷达处于二者之间，但大多数激光雷达已经完成了ROS包。推挤SRB直接连接机器人大脑。</br>

### 为什么SRB只支持主从访问？
SRB只支持主从访问，主机发送数据，然后接收从机的反馈数据。</br>
简单的设计有诸多好处，包括学习容易，开发容易，占用MCU资源更少，也不会让开发者选择通信方式时感到困惑。而且虽然有非常多的通信模型，总线工作时，通常只有一种通信模型在工作。</br>
而添加更多的通信模型能让总线的利用效率更高，对SRB而言，想要加快速度只需要额外添加一条总线，让他们并行工作。</br>

### 相比其他总线485总线的优势是什么？
CAN总线，CAN总线协议复杂，需要特定的控制器，成本较高。根据我们的调查，支持CAN的MCU比支持485的贵10倍左右。此外CANopen过于复杂，学习成本较高。但是CAN物理层稳定，未来可能会有使用CAN总线物理层的SRB设备。</br>
I2C不使用差分传输，工作在100kb/s的情况下，传输距离太近，只适合在一片电路板内部传输，想要远距离传输必须降低波特率，。</br>
以太网设备昂贵，体积相对较大，接线复杂，不易变。</br>
